<!DOCTYPE html>
<html>

<head>

  <title> Particle Swarm Optimization Visualizer </title>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="css/styles.css" type="text/css">



</head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


  <body>
<nav class="navbar" role="navigation" aria-label="main navigation"
  style="background-color:Black" 
  >
  <div class="navbar-brand">
    <a class="navbar-item" href="#"

    style="color: white;
    font-weight:bold;
    font-size:20px">
Visualization of Particle Swarm Optimization
    </a>


  </div>
</nav>
  
     
    <!-- Page -->
    <div class="wrapper row">
      <div id="container" class="clear">

        <div class="box">
        <span style="font-size:1rem">
      <a style="border-bottom: 2px solid black;" href="https://mae.ufl.edu/mdo/Papers/5334.pdf"> Particle Swarm Optimization (PSO)</a> is a Metaheuristic algorithm, which uses a model of a swarm of particles to find the minimum value of a given function.<br/> Below is a tool to understand and test it in a more practical way. 

    </span>
          
        </div>

        <section id="graph" class="clear">

          
          <progress id="iterationprogress" class="progress is-success" style=" display: none; transition: 0.3s all;" value="0" max="100">100%</progress>

          <figure>
            <div style="display: None;" id="psoViz" ></div>

      
            <figcaption>

              <div class="container">


                                   <form>
                     
                     <div class="field">
 
                       <label class="label"   for="expr">Functional expression f(x,y) </label>
                      <div class="control">
                        
                        <input   class = "input is-hovered  " type="text" id="expr" name="expr" value='(1 + ((x + y + 1) ^ 2) * (19 - 14 * x + 3 * x * x - 14 * y + 6 * x * x + 3 * y * y)) * (30 + ((2 * x - 3 * y)^2) * (18 - 32 * x + 12 * x * x + 48 * y - 36 * x * y + 27 * y * y))'/>

 
                      </div>
                       
                    </div>

                           
                  </form>

                
<br/>
                      <button class="button is-info is-small is-outlined" onclick=show_func()>
                        Check other functions
                      </button> 
                 <div id="modal-class-function" class="modal"  >
                  <div class="modal-background" ></div>
                  <div class="modal-content" style="background-color:  white; margin: 3px; padding: 5px; padding-left: 8px;">
                <br/>
                <h2 class="label">Standard Functions</h3>
                 
                <ul style="font-size:18px">
                  <li>
                    <strong>De Jong's function</strong> &nbsp;  f(x) = x^2 + y^2
                  </li>

                  <li>
                    <strong>Rosenbrock's valley</strong> &nbsp;  f(x) = 100(y - x^2)^2 + (1 - x)^2
                  </li>

 


                </ul>
                <br/>
                Check out more optimization functions in <a href="https://robertmarks.org/Classes/ENGR5358/Papers/functions.pdf">here </a>
                  </div>
                  <button onclick=show_func() class="modal-close is-large" aria-label="close"></button>
                </div>


<br/><br/>
                 <form>
                                  <h3 class="label">Optimization parameters</h3> 
                                   

                  <div class="columns  is-multiline is-mobile">

                  <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      X

                  </div>

                  <div class="column is-one-quarter" style="margin:2px">
                    <input class="input is-small  " type="text" id="xMin" name="xMin" value='-2'>

                  </div>
                  <div class="column is-one-quarter" style="margin:2px">
                              <input class="input is-small  " type="text" id="xMax" name="xMax" value='2'>
                  </div>

                 <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      Y

                  </div>

                  <div class="column is-one-quarter" style="margin:2px">
<input class="input is-small  " type="text" id="yMin" name="yMin" value='-2'>

                  </div>
                  <div class="column is-one-quarter" style="margin:2px">
                      <input class="input is-small " type="text" id="yMax" name="yMax" value='1'>
                  </div>


                 <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      Particles (Numbers)

                  </div>

                  <div class="column is-half" style="margin:2px">
                        <input class="input is-small is-rounded" type="text" id="pop" name="pop" value='50'>
                  </div>
 
                  <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      Iterations

                  </div>

                  <div class="column is-half" style="margin:2px">
                      <input class="input is-small is-rounded" type="text" id="iteration" name="iteration" value="10">
                  </div>


                  <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                     &omega; (Inertia factor)

                  </div>

                  <div class="column is-half" style="margin:2px">
                        <input class="input is-small is-rounded" type="text" id="omega" name="omega" value="0.72984">
                  </div>


                  <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      P<sub>b</sub> (Personal Best)
                  </div>

                  <div class="column is-half" style="margin:2px">
                      <input class="input is-small is-rounded" type="text" id="phip" name="phip" value="1">
                  </div>


                 <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      G<sub>b</sub> (Global Best)
                  </div>

                  <div class="column is-half" style="margin:2px">
                      <input class="input is-small is-rounded" type="text" id="phig" name="phig" value="1">
                  </div>

                 <div class="column is-one-quarter" style="color: black; font-weight:bold;">
                      
                      Animation (x times)
                  </div>

                  <div class="column is-half" style="margin:2px">
                  <div class="select is-rounded is-small">
                    <select id="animation-tag">
                      <option>1</option>
                      <option>2</option>
                      <option>0.5</option>
                                            <option>5</option>
                    </select>
                  </div>
                  </div>


 
                 </form> 
                 
                   <div class="buttons has-addons"  >
                 <button class="button is-warning" type="button" id="refresh">Submit Values</button> 
                 &nbsp;
                     <i class="fas fa-arrow-right"></i>
&nbsp;
                 <button class="button is-info" type="button" id="start">Start</button>
                 &nbsp;
                     <i class=" fas fa-spinner fa-pulse" style="display:none;" id="pulseId"></i>
&nbsp;


                

                  </div>

   
              </div>

              <br/><br/>
                      <article class="message is-link" >

            <div class="message-body" id="individualVal" style="display: none;   transition: width 1s linear 0.5s; ">

 
            </div>
          </article>
 


            </figcaption>


          </figure>


        </section>
      <div id="curve_chart" style="width: 800px; height: 500px; float: right; "></div>        
        <div id="content">

  
          <section class="clear">
 <br/><br/><br/>     



     <div class=" box notification is-info" style="display:none" id="box-viz">
 
                             <p id = psoVizResults style="font-size:20px"></p>              
          
          <br/>
          <button id="show_graph_button" hidden=true onclick=show_chart_graph() class="button is-primary is-rounded">
            Show Graph
          </button>

      </div>        

<!--       <div id="curve_chart" style="width: 1150px; height: 500px;  "></div> -->
 
       
<!--             <article class="contentBox">
              <h3>Note</h3>
              <p><font color="#3299BB">&omega;</font>, <font color="#3299BB">&phi;<sub>p</sub></font> and <font color="#3299BB">&phi;<sub>g</sub></font> control the behaviour and efficacy of the PSO method. <br>
              They can have a large impact on the optimization performance. Choose them precautiously.</p>
             <p>To update the expression, please note that <font color="#3299BB">&#8730;<span style="text-decoration: overline">x</span></font> is written <font color="#FF9900">sqrt(x)</font>, <font color="#3299BB">|x|</font> is equal to <font color="#FF9900">abs(x)</font>, and <font color="#3299BB">e<sup>x</sup></font> is written <font color="#FF9900">exp( x)</font>.</p> 
            </article>
 -->            
          </section> 
        </div>

        <span id="hidden-chart" style="display: none;"></span>

      <footer class="footer" style="background-color:inherit">
  <div class="content has-text-centered" >

    <p style="font-size:1rem">
      Project on <strong>Web based Visualisation of Particle Swarm Optimization</strong> &nbsp;<i class="fab fa-angellist"></i>
    </p>

  </div>
</footer>  
      </div>

    </div>
    
  <!-- JS -->
  <script src="js/mathjs/math.min.js"></script>  
  <script src="js/d3v4/d3.min.js"></script>
  <script src="js//d3-scale-chromatic.min.js"></script>
  <script src="js/d3-contour.min.js"></script>
  <script src="js/psoViz.js"></script>
  
  <script>

function show_func( )  
  {
   var element = document.getElementById("modal-class-function");
   element.classList.toggle("is-active");
} 

function show_chart_graph( ) {

  document.getElementById("show_graph_button").hidden = true

    google.charts.load('current', {'packages':['corechart']});

        if (   document.getElementById("hidden-chart").innerText )
        {
      google.charts.setOnLoadCallback(drawChart);          
        }      


      function drawChart() {
        var data = google.visualization.arrayToDataTable( eval((document.getElementById("hidden-chart").innerText)));


         
  

        var options = {
          title: 'Functional Value vs Iteration graph',
          curveType: 'function',
          legend: 'bottom' ,
           is3D  : true ,
          y: {
            Temps: {label: 'Values'} 
            
          }
        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }

}

  
    // Define expression
    formula = "".concat('f(x,y) = ', document.getElementById("expr").value);
    expr = math.parser().eval(formula);
    
    // Define options
    var options = {
      grid: { xMin: parseFloat(document.getElementById("xMin").value), 
              xMax: parseFloat(document.getElementById("xMax").value), 
              yMin: parseFloat(document.getElementById("yMin").value), 
              yMax: parseFloat(document.getElementById("yMax").value) },
      iteration: parseFloat(document.getElementById("iteration").value),
      number: parseFloat(document.getElementById("pop").value),
      w: parseFloat(document.getElementById("omega").value),
      c1: parseFloat(document.getElementById("phip").value),
      c2: parseFloat(document.getElementById("phig").value),
                animationSpeed: parseFloat(document.getElementById("animation-tag").value)
    };
    
    // Call psoViz function
    psoViz("#psoViz", expr, options);
    
    // Add button that call psoViz to refresh
    d3.select('#refresh')
      .on('click', function(d) {
        
	      d3.select('#psoViz').select("svg").remove();
	      d3.select('#psoViz').select(".tooltip").remove();
	      d3.select('#psoVizResults').selectAll('table').remove();
	      
	      formula = "".concat('f(x,y) = ', document.getElementById("expr").value);
        expr = math.parser().eval(formula);
	      
        var options = {
          grid: { xMin: parseFloat(document.getElementById("xMin").value), 
              xMax: parseFloat(document.getElementById("xMax").value), 
              yMin: parseFloat(document.getElementById("yMin").value), 
              yMax: parseFloat(document.getElementById("yMax").value) },
          iteration: parseFloat(document.getElementById("iteration").value),
          number: parseFloat(document.getElementById("pop").value),
          w: parseFloat(document.getElementById("omega").value),
          c1: parseFloat(document.getElementById("phip").value),
          c2: parseFloat(document.getElementById("phig").value),
          animationSpeed: parseFloat(document.getElementById("animation-tag").value)
        };
  	      
        psoViz("#psoViz", expr, options);
    });
    
    // Example expressions
    /*function expr(x, y) { 
        return Math.pow(x + 2 * y -7, 2) + Math.pow(2 * x + y - 5, 2);
    }*/
    
    /*function expr(x, y) { 
        return Math.pow(Math.sin(3 * Math.PI * x), 2) + Math.pow(x - 1, 2) * (1 + Math.pow(Math.sin(3 * Math.PI * y), 2) + 
        Math.pow(y - 1, 2) * (1 + Math.pow(Math.sin(2 * Math.PI * y), 2)));
    }*/
    
  </script>



  </body>
  
</html>
